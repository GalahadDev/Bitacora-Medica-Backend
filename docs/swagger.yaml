basePath: /api
definitions:
  auth.UpdateProfileInput:
    properties:
      bio:
        type: string
      birth_date:
        type: string
      full_name:
        type: string
      gender:
        type: string
      nationality:
        type: string
      phone:
        type: string
      residence_country:
        type: string
      rut:
        type: string
      specialty:
        type: string
      university:
        type: string
    type: object
  collaborations.RespondInvitationInput:
    properties:
      status:
        enum:
        - ACCEPTED
        - REJECTED
        type: string
    required:
    - status
    type: object
  domains.CreateSessionInput:
    properties:
      achievements:
        type: string
      description:
        type: string
      has_incident:
        type: boolean
      incident_details:
        type: string
      incident_photo:
        type: string
      intervention_plan:
        type: string
      next_session_notes:
        type: string
      patient_id:
        type: string
      patient_performance:
        type: string
      photos:
        items:
          type: string
        type: array
      vitals:
        additionalProperties: true
        type: object
    required:
    - description
    - intervention_plan
    - patient_id
    type: object
  domains.CreateTicketInput:
    properties:
      message:
        type: string
      subject:
        type: string
    required:
    - message
    - subject
    type: object
  domains.InviteInput:
    properties:
      email:
        type: string
      patient_id:
        type: string
    required:
    - email
    - patient_id
    type: object
  domains.ReplyTicketInput:
    properties:
      response:
        type: string
    required:
    - response
    type: object
  patients.CreatePatientInput:
    properties:
      birth_date:
        description: YYYY-MM-DD
        type: string
      consent_pdf_url:
        type: string
      diagnosis:
        type: string
      email:
        type: string
      emergency_phone:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      phone:
        type: string
      rut:
        type: string
      sex:
        description: '"Masculino", "Femenino"'
        type: string
    required:
    - birth_date
    - consent_pdf_url
    - email
    - first_name
    - last_name
    - rut
    - sex
    type: object
  patients.UpdatePatientInput:
    properties:
      care_notes:
        type: string
      disability_report:
        type: string
    type: object
  reports.CreateReportInput:
    properties:
      content:
        type: string
      end_date:
        type: string
      objectives:
        type: string
      patient_id:
        type: string
      start_date:
        description: YYYY-MM-DD
        type: string
    required:
    - content
    - end_date
    - patient_id
    - start_date
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: Backend API for Bitacora Médica application.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Bitacora Médica API
  version: "1.0"
paths:
  /auth/me:
    get:
      description: Get the currently authenticated user's profile
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Get current user
      tags:
      - Auth
  /auth/profile:
    put:
      consumes:
      - application/json
      description: Update the authenticated user's profile information
      parameters:
      - description: Profile Update Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/auth.UpdateProfileInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Update user profile
      tags:
      - Auth
  /collaborations/{id}/respond:
    put:
      consumes:
      - application/json
      description: Accept or Reject a collaboration invitation
      parameters:
      - description: Collaboration ID
        in: path
        name: id
        required: true
        type: string
      - description: Response Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/collaborations.RespondInvitationInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Respond to invitation
      tags:
      - Collaborations
  /collaborations/invite:
    post:
      consumes:
      - application/json
      description: Invite another professional to collaborate on a patient
      parameters:
      - description: Invitation Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/domains.InviteInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Invite professional
      tags:
      - Collaborations
  /collaborations/pending:
    get:
      description: Get list of pending collaboration invitations for the current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: List pending invitations
      tags:
      - Collaborations
  /dashboard/summary:
    get:
      description: Get dashboard statistics for the professional
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: Get dashboard summary
      tags:
      - Professional
  /patients:
    get:
      description: List patients created by or shared with the professional
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: List patients
      tags:
      - Patients
    post:
      consumes:
      - application/json
      description: Create a new patient record
      parameters:
      - description: Patient Creation Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/patients.CreatePatientInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Create a new patient
      tags:
      - Patients
  /patients/{id}:
    get:
      description: Get detailed patient profile including team and recent sessions
      parameters:
      - description: Patient ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Get patient profile
      tags:
      - Patients
    put:
      consumes:
      - application/json
      description: Update patient details (disability report, care notes)
      parameters:
      - description: Patient ID
        in: path
        name: id
        required: true
        type: string
      - description: Update Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/patients.UpdatePatientInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Update patient
      tags:
      - Patients
  /reports:
    post:
      consumes:
      - application/json
      description: Create a professional report for a patient
      parameters:
      - description: Report Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/reports.CreateReportInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Create individual report
      tags:
      - Reports
  /reports/list:
    get:
      description: List reports for a specific patient
      parameters:
      - description: Patient ID
        in: query
        name: patient_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: List patient reports
      tags:
      - Reports
  /reports/master:
    get:
      description: Generate a consolidated master report for date range
      parameters:
      - description: Patient ID
        in: query
        name: patient_id
        required: true
        type: string
      - description: Start Date (YYYY-MM-DD)
        in: query
        name: start_date
        required: true
        type: string
      - description: End Date (YYYY-MM-DD)
        in: query
        name: end_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Generate master report
      tags:
      - Reports
  /sessions:
    get:
      description: List sessions with optional filters
      parameters:
      - description: Filter by Patient ID
        in: query
        name: patient_id
        type: string
      - description: Filter by Professional ID
        in: query
        name: professional_id
        type: string
      - description: Filter by Incident presence
        in: query
        name: has_incident
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: List sessions
      tags:
      - Sessions
    post:
      consumes:
      - application/json
      description: Record a new therapy session
      parameters:
      - description: Session Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/domains.CreateSessionInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Create session
      tags:
      - Sessions
  /sessions/{id}:
    delete:
      description: Soft delete a session (Only Author or Admin)
      parameters:
      - description: Session ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Delete session
      tags:
      - Sessions
    get:
      parameters:
      - description: Session ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Get session details
      tags:
      - Sessions
    put:
      consumes:
      - application/json
      description: Update specific session fields (Only Author or Admin)
      parameters:
      - description: Session ID
        in: path
        name: id
        required: true
        type: string
      - description: Update Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/domains.CreateSessionInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Update session
      tags:
      - Sessions
  /support:
    get:
      description: List tickets (Admin sees all, User sees own)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      security:
      - Bearer: []
      summary: List support tickets
      tags:
      - Support
    post:
      consumes:
      - application/json
      parameters:
      - description: Ticket Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/domains.CreateTicketInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Create support ticket
      tags:
      - Support
  /support/{id}/reply:
    put:
      consumes:
      - application/json
      description: Admin reply to a support ticket
      parameters:
      - description: Ticket ID
        in: path
        name: id
        required: true
        type: string
      - description: Reply Data
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/domains.ReplyTicketInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - Bearer: []
      summary: Reply to ticket
      tags:
      - Support
securityDefinitions:
  Bearer:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
